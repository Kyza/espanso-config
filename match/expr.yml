matches:
   - regex: "E(?P<expr>.+?)(?P<format>f?);"
     replace: "{{output}}"
     vars:
        - name: output
          type: script
          params:
             args:
                - deno
                - --quiet
                - run
                - "%CONFIG%/scripts/expr.ts"
                - "--expr={{expr}}"
                - "--format={{format}}"

   - trigger: "expr;"
     replace: "{{output}}"
     vars:
        - name: "form"
          type: "form"
          params:
             layout: |
                [[expr]]
                [[format]]
             fields:
                expr:
                   multiline: true
                format:
                   type: list
                   default: Plain
                   values:
                      - Plain
                      - Formatted
        - name: output
          type: script
          params:
             args:
                - deno
                - --quiet
                - run
                - "%CONFIG%/scripts/expr.ts"
                - "--expr={{form.expr}}"
                - "--format={{form.format}}"
